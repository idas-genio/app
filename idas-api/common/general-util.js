/*
|------------------------------------------------------------------------------------------------------------------
| Author:	    TS MOGANO
| Create date:  02/03/2021
| Description:  IDAS - Genio - API - common Functions utilities class 
|------------------------------------------------------------------------------------------------------------------
 */

/*
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
| Dependency(ies)
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
*/
const {
    formatDateMMDDYYWithSlashSeparator
} = require(`./../common/date-util`);

/*
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
| Function(s)
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
*/
const getSAIdNumberBirthDate = (idNumber) => {
    const useIdNumber = String(idNumber || '');
    if(useIdNumber && useIdNumber.length === 13){
      const year = Number(useIdNumber.substring(0, 2));
      const month = Number(useIdNumber.substring(2, 4)) - 1; // -1 because Angular Date.Month ranges from 0 - 11
      const day = Number(useIdNumber.substring(4, 6));
      return formatDateMMDDYYWithSlashSeparator(new Date(year, month, day));
    }
    return null;
}
const getSAIdNumberGenderName = (idNumber) => {
    const useIdNumber = String(idNumber || '');
    if(useIdNumber && useIdNumber.length === 13){
      const gender = Number(useIdNumber.substring(6, 10));
      return (gender >= 0 && gender <= 4999) ? 'Female' : (gender >= 5000 && gender <= 9999) ? 'Male' : 'Other';
    }
    return null;
  }

/*
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
| module.exports
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
*/
module.exports = {
    getSAIdNumberBirthDate: getSAIdNumberBirthDate,
    getSAIdNumberGenderName: getSAIdNumberGenderName,
}